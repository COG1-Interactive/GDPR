!function(t){"use strict";t(function(){t(document).on("click",".gdpr-options .notice-dismiss",function(){t(this).parent().parent().remove()}),t(".add-tab").click(function(a){a.preventDefault();var e=t("#cookie-tabs");if(""!==e.val()){var n=e.val().toLowerCase().replace(/ /g,"-"),s=e.val(),i=wp.template("cookie-tabs");t("#tabs").append(i({key:n,name:s,option_name:GDPR.cookie_popup_content})),e.val("")}}),t(document).on("click",".add-host",function(a){a.preventDefault();var e=t(this).siblings("input");if(""!==e.val()){var n=t(this).data("tabid"),s=e.val().toLowerCase().replace(" ","-"),i=wp.template("cookie-tabs-hosts");t('.tab-hosts[data-tabid="'+n+'"]').append(i({host_key:s,tab_key:n,option_name:GDPR.cookie_popup_content})),e.val("")}}),t(document).on("click","#tabs .notice-dismiss",function(a){a.preventDefault(),t(this).closest(".postbox").remove()}),t(document).on("click",".gdpr-request-table .gdpr-review",function(a){a.preventDefault();var e=t(this).data("index");t("tr[data-index="+e+"] div").slideToggle()}),t(document).on("click",".gdpr .nav-tab-wrapper a",function(a){var e=t(this).attr("href");e=e.replace("#",""),t(this).addClass("nav-tab-active"),t(this).siblings().removeClass("nav-tab-active"),t(".gdpr .tab").addClass("hidden"),t(".gdpr .tab[data-id="+e+"]").removeClass("hidden")});var a=window.location.hash;a?(t('.gdpr .nav-tab-wrapper a[href="'+a+'"]').addClass("nav-tab-active"),t('.gdpr .tab[data-id="'+a.replace("#","")+'"]').removeClass("hidden")):(t(".gdpr .nav-tab-wrapper a:eq(0)").addClass("nav-tab-active"),t(".gdpr .tab:eq(0)").removeClass("hidden")),t(document).on("change",".gdpr-reassign",function(){0!=t(this).val()?(t(this).closest("tr").find("td:last .button-primary").attr("disabled",!1),t(this).closest("tr").find('td:last input[name="reassign_to"]').val(t(this).val())):(t(this).closest("tr").find("td:last .button-primary").attr("disabled",!0),t(this).closest("tr").find('td:last input[name="reassign_to"]').val(""))}),t(document).on("submit",".gdpr-reassign-content",function(a){a.preventDefault();var e=t(this).find('input[name="user_email"]').val(),n=t(this).find('input[name="reassign_to"]').val(),s=t(this).find('input[name="post_type"]').val(),i=t(this).find('input[name="post_count"]').val(),d=t(this).find('input[name="gdpr_reassign_content_nonce"]').val(),o=t(this).find(".button-primary"),r=t(this).find(".spinner"),c=t(this).find("p.hidden");n&&(o.addClass("hidden"),r.addClass("is-active"),r.css("display","block"),t.post(ajaxurl,{action:"gdpr_reassign_content",user_email:e,reassign_to:n,post_type:s,post_count:i,nonce:d},function(t){r.removeClass("is-active"),r.hide(),c.removeClass("hidden"),t.success||c.text(t.data)}))}),t(document).on("submit",".gdpr-anonymize-comments",function(a){a.preventDefault();var e=t(this).find('input[name="user_email"]').val(),n=t(this).find('input[name="comment_count"]').val(),s=t(this).find('input[name="gdpr_anonymize_comments_nonce"]').val(),i=t(this).find(".button-primary"),d=t(this).find(".spinner"),o=t(this).find("p.hidden");i.addClass("hidden"),d.addClass("is-active"),d.css("display","block"),t.post(ajaxurl,{action:"gdpr_anonymize_comments",user_email:e,comment_count:n,nonce:s},function(t){d.removeClass("is-active"),d.hide(),o.removeClass("hidden"),t.success||o.text(t.data)})}),t(document).on("submit",".gdpr-access-data-lookup",function(a){a.preventDefault();var e=t(this).find('input[name="user_email"]'),n=e.val(),s=t(this).find('input[name="gdpr_access_data_nonce"]').val(),i=t(this).find(".button-primary"),d=t(this).find(".spinner"),o=t(".gdpr-access-data-result");i.addClass("hidden"),d.show(),o.remove(),e.val(""),t.post(ajaxurl,{action:"gdpr_access_data",nonce:s,email:n},function(a){if(i.removeClass("hidden"),d.hide(),a.success){var e=wp.template("access-data-result-success");t('.gdpr div[data-id="access"]').append(e({result:a.data}))}else{e=wp.template("access-data-result-error");t('.gdpr div[data-id="access"]').append(e())}})})})}(jQuery);